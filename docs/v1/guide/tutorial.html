<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Tutorial | v9s</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/v9s/v1/../../img/logo.png">
    <meta name="description" content="TypeScript-based validations">
    <meta name="theme-color" content="#0078cf">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/v9s/v1/assets/css/0.styles.f5844c59.css" as="style"><link rel="preload" href="/v9s/v1/assets/js/app.6be5d2a5.js" as="script"><link rel="preload" href="/v9s/v1/assets/js/3.058decf2.js" as="script"><link rel="preload" href="/v9s/v1/assets/js/10.48a2754e.js" as="script"><link rel="prefetch" href="/v9s/v1/assets/js/11.9bbeac29.js"><link rel="prefetch" href="/v9s/v1/assets/js/12.b1011e00.js"><link rel="prefetch" href="/v9s/v1/assets/js/13.4020df03.js"><link rel="prefetch" href="/v9s/v1/assets/js/14.e61d2482.js"><link rel="prefetch" href="/v9s/v1/assets/js/15.f01dbc41.js"><link rel="prefetch" href="/v9s/v1/assets/js/4.87b97789.js"><link rel="prefetch" href="/v9s/v1/assets/js/5.4efb3862.js"><link rel="prefetch" href="/v9s/v1/assets/js/6.ef743d8c.js"><link rel="prefetch" href="/v9s/v1/assets/js/7.13843a58.js"><link rel="prefetch" href="/v9s/v1/assets/js/8.0c914c62.js"><link rel="prefetch" href="/v9s/v1/assets/js/9.f9d4b1f6.js"><link rel="prefetch" href="/v9s/v1/assets/js/vendors~docsearch.b4d343ba.js">
    <link rel="stylesheet" href="/v9s/v1/assets/css/0.styles.f5844c59.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/v9s/v1/" class="home-link router-link-active"><!----> <span class="site-name">v9s</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/v9s/v1/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/v9s/v1/guide/" class="nav-link router-link-active">
  Guide
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="v1.1.x" class="dropdown-title"><span class="title">v1.1.x</span> <span class="arrow down"></span></button> <button type="button" aria-label="v1.1.x" class="mobile-dropdown-title"><span class="title">v1.1.x</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://vueent.github.io/v9s" target="_blank" rel="noopener noreferrer" class="nav-link external">
  v2.x
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Languages" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Languages" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/v9s/v1/guide/tutorial.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/v9s/v1/ru/guide/tutorial.html" class="nav-link">
  Русский
</a></li></ul></div></div> <a href="https://github.com/vueent/v9s" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/v9s/v1/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/v9s/v1/guide/" class="nav-link router-link-active">
  Guide
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="v1.1.x" class="dropdown-title"><span class="title">v1.1.x</span> <span class="arrow down"></span></button> <button type="button" aria-label="v1.1.x" class="mobile-dropdown-title"><span class="title">v1.1.x</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://vueent.github.io/v9s" target="_blank" rel="noopener noreferrer" class="nav-link external">
  v2.x
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Languages" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Languages" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/v9s/v1/guide/tutorial.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/v9s/v1/ru/guide/tutorial.html" class="nav-link">
  Русский
</a></li></ul></div></div> <a href="https://github.com/vueent/v9s" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Guide</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/v9s/v1/guide/" aria-current="page" class="sidebar-link">Introduction</a></li><li><a href="/v9s/v1/guide/tutorial.html" aria-current="page" class="active sidebar-link">Tutorial</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/v9s/v1/guide/tutorial.html#simple-example" class="sidebar-link">Simple example</a></li><li class="sidebar-sub-header"><a href="/v9s/v1/guide/tutorial.html#error-messages" class="sidebar-link">Error messages</a></li><li class="sidebar-sub-header"><a href="/v9s/v1/guide/tutorial.html#sequence" class="sidebar-link">Sequence</a></li><li class="sidebar-sub-header"><a href="/v9s/v1/guide/tutorial.html#inversion" class="sidebar-link">Inversion</a></li><li class="sidebar-sub-header"><a href="/v9s/v1/guide/tutorial.html#optional-modifier" class="sidebar-link">Optional modifier</a></li><li class="sidebar-sub-header"><a href="/v9s/v1/guide/tutorial.html#composition" class="sidebar-link">Composition</a></li><li class="sidebar-sub-header"><a href="/v9s/v1/guide/tutorial.html#external-rules" class="sidebar-link">External rules</a></li><li class="sidebar-sub-header"><a href="/v9s/v1/guide/tutorial.html#modifiers" class="sidebar-link">Modifiers</a></li><li class="sidebar-sub-header"><a href="/v9s/v1/guide/tutorial.html#internationalization" class="sidebar-link">Internationalization</a></li><li class="sidebar-sub-header"><a href="/v9s/v1/guide/tutorial.html#context" class="sidebar-link">Context</a></li></ul></li><li><a href="/v9s/v1/guide/built-in-rules.html" class="sidebar-link">Built-in rules</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="tutorial"><a href="#tutorial" class="header-anchor">#</a> Tutorial</h1> <h2 id="simple-example"><a href="#simple-example" class="header-anchor">#</a> Simple example</h2> <p>v9s creates a rules chain. An execution of the chain starts at the end and finishes at the beginning (see the following examples). You may include your own rules in the chain with <code>use</code> method. Call <code>check</code> method to validate a value.</p> <p>Easy example:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> v9s <span class="token keyword">from</span> <span class="token string">'v9s'</span><span class="token punctuation">;</span>

<span class="token comment">// create a validator instance with rules.</span>
<span class="token keyword">const</span> validator <span class="token operator">=</span> v9s<span class="token punctuation">.</span><span class="token function">lte</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">gte</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> small <span class="token operator">=</span> validator<span class="token punctuation">.</span><span class="token function">check</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// check small value</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>small<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>

<span class="token keyword">const</span> big <span class="token operator">=</span> validator<span class="token punctuation">.</span><span class="token function">check</span><span class="token punctuation">(</span><span class="token number">110</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// check big value</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>big<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>

<span class="token keyword">const</span> normal <span class="token operator">=</span> validator<span class="token punctuation">.</span><span class="token function">check</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// check normal value</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>normal<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div><h2 id="error-messages"><a href="#error-messages" class="header-anchor">#</a> Error messages</h2> <p>It is often necessary to add text messages instead of <code>true</code> or <code>false</code> result. Very easy, just add the second string parameter to a built-in rule or <code>use</code> method. Let's rewrite the previous example:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> v9s <span class="token keyword">from</span> <span class="token string">'v9s'</span><span class="token punctuation">;</span>

<span class="token comment">// create a validator instance with rules and error messages.</span>
<span class="token keyword">const</span> validator <span class="token operator">=</span> v9s<span class="token punctuation">.</span><span class="token function">lte</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token string">'too big'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">gte</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">'too small'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> small <span class="token operator">=</span> validator<span class="token punctuation">.</span><span class="token function">check</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// check small value</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>small<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'too small'</span>

<span class="token keyword">const</span> big <span class="token operator">=</span> validator<span class="token punctuation">.</span><span class="token function">check</span><span class="token punctuation">(</span><span class="token number">110</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// check big value</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>big<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'too big'</span>

<span class="token keyword">const</span> normal <span class="token operator">=</span> validator<span class="token punctuation">.</span><span class="token function">check</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// check normal value</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>normal<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div><p>If you need to use an another message format - set the type (except for <code>boolean</code> or <code>Function</code>):</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> v9s <span class="token keyword">from</span> <span class="token string">'v9s'</span><span class="token punctuation">;</span>

<span class="token keyword">enum</span> ValidationError <span class="token punctuation">{</span>
  tooSmall<span class="token punctuation">,</span>
  tooBig
<span class="token punctuation">}</span>

<span class="token keyword">const</span> validator <span class="token operator">=</span> v9s<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">lte</span><span class="token generic class-name"><span class="token operator">&lt;</span>ValidationError<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> tooBig<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">gte</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> tooSmall<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> small <span class="token operator">=</span> validator<span class="token punctuation">.</span><span class="token function">check</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// check small value</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>small<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0</span>

<span class="token keyword">const</span> big <span class="token operator">=</span> validator<span class="token punctuation">.</span><span class="token function">check</span><span class="token punctuation">(</span><span class="token number">110</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// check big value</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>big<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>

<span class="token keyword">const</span> normal <span class="token operator">=</span> validator<span class="token punctuation">.</span><span class="token function">check</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// check normal value</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>normal<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div><h2 id="sequence"><a href="#sequence" class="header-anchor">#</a> Sequence</h2> <p>But what we have to do, if need to receive different error messages for the same rule with a number of thresholds? So, it's a time to remember a sequence of the chain execution.</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> v9s <span class="token keyword">from</span> <span class="token string">'v9s'</span><span class="token punctuation">;</span>

<span class="token comment">// create a validator instance with a ordered chain of rules with error messages.</span>
<span class="token keyword">const</span> validator <span class="token operator">=</span> v9s<span class="token punctuation">.</span><span class="token function">gte</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token string">'small'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">gte</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">'very small'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> verySmall <span class="token operator">=</span> validator<span class="token punctuation">.</span><span class="token function">check</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// check a very small value</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>verySmall<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'very small'</span>

<span class="token keyword">const</span> small <span class="token operator">=</span> validator<span class="token punctuation">.</span><span class="token function">check</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// check a small value</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>small<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'small'</span>

<span class="token keyword">const</span> normal <span class="token operator">=</span> validator<span class="token punctuation">.</span><span class="token function">check</span><span class="token punctuation">(</span><span class="token number">110</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// check a normal value</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>normal<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div><h2 id="inversion"><a href="#inversion" class="header-anchor">#</a> Inversion</h2> <p>Sometimes we want to inverse a result of a rule. Easy! Meet the <code>not</code> method:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> v9s <span class="token keyword">from</span> <span class="token string">'v9s'</span><span class="token punctuation">;</span>

<span class="token comment">// create a validation instance with an inversed rule.</span>
<span class="token keyword">const</span> validator <span class="token operator">=</span> v9s<span class="token punctuation">.</span><span class="token function">not</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> isNumber <span class="token operator">=</span> validator<span class="token punctuation">.</span><span class="token function">check</span><span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// check a number</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>isNumber<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>

<span class="token keyword">const</span> isString <span class="token operator">=</span> validator<span class="token punctuation">.</span><span class="token function">check</span><span class="token punctuation">(</span><span class="token string">'42'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// check a string</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>isString<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false (not a string)</span>
</code></pre></div><h2 id="optional-modifier"><a href="#optional-modifier" class="header-anchor">#</a> Optional modifier</h2> <p>Otherwise it is possible to allow <code>undefined</code> values:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> v9s <span class="token keyword">from</span> <span class="token string">'v9s'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> validator <span class="token operator">=</span> v9s<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">optional</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> isNumber <span class="token operator">=</span> validator<span class="token punctuation">.</span><span class="token function">check</span><span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// check a number</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>isNumber<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>

<span class="token keyword">const</span> isString <span class="token operator">=</span> validator<span class="token punctuation">.</span><span class="token function">check</span><span class="token punctuation">(</span><span class="token string">'42'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// check a string</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>isString<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>

<span class="token keyword">const</span> isNotDefined <span class="token operator">=</span> validator<span class="token punctuation">.</span><span class="token function">check</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// check undefined</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>isNotDefined<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div><p>The <code>optional</code> modifier applies only to the specified rule; the next rule ignores it.</p> <h2 id="composition"><a href="#composition" class="header-anchor">#</a> Composition</h2> <p>When it is necessary to add an alternative condition, it's time to use the <code>or</code> method:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> v9s <span class="token keyword">from</span> <span class="token string">'v9s'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> validator <span class="token operator">=</span> v9s<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">optional</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">or</span><span class="token punctuation">(</span>v9s<span class="token punctuation">.</span><span class="token function">number</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> isString <span class="token operator">=</span> validator<span class="token punctuation">.</span><span class="token function">check</span><span class="token punctuation">(</span><span class="token string">'42'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>isString<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>

<span class="token keyword">const</span> isNotDefined <span class="token operator">=</span> validator<span class="token punctuation">.</span><span class="token function">check</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>isNotDefined<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>

<span class="token keyword">const</span> isNumber <span class="token operator">=</span> validator<span class="token punctuation">.</span><span class="token function">check</span><span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>isNumber<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>

<span class="token keyword">const</span> isBoolean <span class="token operator">=</span> validator<span class="token punctuation">.</span><span class="token function">check</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>isBoolean<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>

<span class="token keyword">const</span> isNull <span class="token operator">=</span> validator<span class="token punctuation">.</span><span class="token function">check</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>isNull<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false, because null !== undefined and may be a legal value</span>
</code></pre></div><p>Usually it's not required to save a validator instance, just a check function:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> v9s <span class="token keyword">from</span> <span class="token string">'v9s'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> check <span class="token operator">=</span> v9s<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">optional</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">or</span><span class="token punctuation">(</span>v9s<span class="token punctuation">.</span><span class="token function">number</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>check<span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">check</span><span class="token punctuation">(</span><span class="token string">'42'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div><h2 id="external-rules"><a href="#external-rules" class="header-anchor">#</a> External rules</h2> <p>Of course, the library contains a minimal number of rules inside, it is possible to use external rules. An external rule should be compatible with this signature:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Rule</span> <span class="token operator">=</span> <span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> context<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
</code></pre></div><p>Let's create our own rule which verifies that the string value is an integer number.</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> v9s <span class="token keyword">from</span> <span class="token string">'v9s'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">integer</span> <span class="token operator">=</span> <span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[0-9]+$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// verify an integer string</span>
<span class="token keyword">const</span> check <span class="token operator">=</span> v9s<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>integer<span class="token punctuation">)</span><span class="token punctuation">.</span>check<span class="token punctuation">;</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">check</span><span class="token punctuation">(</span><span class="token string">'42'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">check</span><span class="token punctuation">(</span><span class="token string">'42a'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
</code></pre></div><h2 id="modifiers"><a href="#modifiers" class="header-anchor">#</a> Modifiers</h2> <p>Okay, we are assured that our value is an integer string. Now add a range of valid values and convert the value to type <code>number</code> via <code>Modifier</code>:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> v9s <span class="token keyword">from</span> <span class="token string">'v9s'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">integer</span> <span class="token operator">=</span> <span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[0-9]+$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">modify</span> <span class="token operator">=</span> <span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">Number</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// convert a string to a number</span>
<span class="token keyword">const</span> check <span class="token operator">=</span> v9s<span class="token punctuation">.</span><span class="token function">between</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>integer<span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> modify<span class="token punctuation">)</span><span class="token punctuation">.</span>check<span class="token punctuation">;</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">check</span><span class="token punctuation">(</span><span class="token string">'42'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">check</span><span class="token punctuation">(</span><span class="token string">'9'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">check</span><span class="token punctuation">(</span><span class="token string">'110'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
</code></pre></div><p>Modifier signature is:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Modifier</span> <span class="token operator">=</span> <span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> context<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">any</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="internationalization"><a href="#internationalization" class="header-anchor">#</a> Internationalization</h2> <p>Message factory functions can be used instead of string messages. That feature may be useful for internationalized applications.</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> v9s <span class="token keyword">from</span> <span class="token string">'v9s'</span><span class="token punctuation">;</span>

<span class="token keyword">enum</span> Lang <span class="token punctuation">{</span>
  de<span class="token punctuation">,</span>
  en<span class="token punctuation">,</span>
  ru
<span class="token punctuation">}</span>

<span class="token keyword">let</span> lang<span class="token operator">:</span> Lang <span class="token operator">=</span> Lang<span class="token punctuation">.</span>en<span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">errorMessageFactory</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>lang<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> Lang<span class="token punctuation">.</span>de<span class="token operator">:</span>
      <span class="token keyword">return</span> <span class="token string">'Ungültiger Wert'</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> Lang<span class="token punctuation">.</span>ru<span class="token operator">:</span>
      <span class="token keyword">return</span> <span class="token string">'Неверное значение'</span><span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
      <span class="token keyword">return</span> <span class="token string">'Invalid value'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> check <span class="token operator">=</span> v9s<span class="token punctuation">.</span><span class="token function">between</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> errorMessageFactory<span class="token punctuation">)</span><span class="token punctuation">.</span>check<span class="token punctuation">;</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">check</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">check</span><span class="token punctuation">(</span><span class="token number">110</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'Invalid value'</span>

lang <span class="token operator">=</span> Lang<span class="token punctuation">.</span>de<span class="token punctuation">;</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">check</span><span class="token punctuation">(</span><span class="token number">110</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'Ungültiger Wert'</span>

lang <span class="token operator">=</span> Lang<span class="token punctuation">.</span>ru<span class="token punctuation">;</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">check</span><span class="token punctuation">(</span><span class="token number">110</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'Неверное значение'</span>
</code></pre></div><h2 id="context"><a href="#context" class="header-anchor">#</a> Context</h2> <p>You've seen a <code>context</code> parameter in the previous examples. This is an object (by default: <code>{}</code>) that moves between rules in the chain and allows communication between them. It may contain an intermediate calculations, other subject fields and so on. In the following example the intermediate calculations are moved between rules:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> v9s <span class="token keyword">from</span> <span class="token string">'v9s'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">checkForDuplicates</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> context<span class="token operator">:</span> <span class="token punctuation">{</span> sorted<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> sorted <span class="token operator">=</span> value<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>a <span class="token operator">&lt;</span> b <span class="token operator">?</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">:</span> a <span class="token operator">&gt;</span> b <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> noDuplicates <span class="token operator">=</span> sorted<span class="token punctuation">.</span><span class="token function">every</span><span class="token punctuation">(</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span> i<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">!</span>i <span class="token operator">||</span> sorted<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">!==</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>noDuplicates<span class="token punctuation">)</span> context<span class="token punctuation">.</span>sorted <span class="token operator">=</span> sorted<span class="token punctuation">;</span>

  <span class="token keyword">return</span> noDuplicates<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">checkMinimum</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>minimum<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> context<span class="token operator">:</span> <span class="token punctuation">{</span> sorted<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> sorted <span class="token punctuation">}</span> <span class="token operator">=</span> context<span class="token punctuation">;</span>

  <span class="token keyword">return</span> sorted<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> minimum <span class="token operator">&lt;=</span> sorted<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">checkMaximum</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>maximum<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> context<span class="token operator">:</span> <span class="token punctuation">{</span> sorted<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> sorted <span class="token punctuation">}</span> <span class="token operator">=</span> context<span class="token punctuation">;</span>

  <span class="token keyword">return</span> sorted<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> maximum <span class="token operator">&gt;=</span> sorted<span class="token punctuation">[</span>sorted<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> check <span class="token operator">=</span> v9s<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">checkMaximum</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">checkMinimum</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>checkForDuplicates<span class="token punctuation">)</span><span class="token punctuation">.</span>check<span class="token punctuation">;</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">check</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false - empty</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">check</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false - duplicates of `1`</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">check</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false - 1 &lt; 10</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">check</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">105</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false - 105 &gt; 100</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">check</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div><p>Yet another way to use a context is a conditional check according to other fields of the object. <code>value</code> and <code>name</code> fields of the interface do matter only when all of them are not empty. In the following example the context argument is manually sent to the <code>check</code> function.</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> v9s <span class="token keyword">from</span> <span class="token string">'v9s'</span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">Data</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  value<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">checkNameRule</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> context<span class="token operator">:</span> Data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">!</span>value <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>context<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token operator">||</span> value<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">checkValueRule</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> context<span class="token operator">:</span> Data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">!</span>value <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>context<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[0-9]+$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> checkName <span class="token operator">=</span> v9s<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>checkNameRule<span class="token punctuation">)</span><span class="token punctuation">.</span>check<span class="token punctuation">;</span>
<span class="token keyword">const</span> checkValue <span class="token operator">=</span> v9s<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>checkValueRule<span class="token punctuation">)</span><span class="token punctuation">.</span>check<span class="token punctuation">;</span>

<span class="token keyword">const</span> empty <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token string">''</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">checkName</span><span class="token punctuation">(</span>empty<span class="token punctuation">.</span>name<span class="token punctuation">,</span> empty<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">checkValue</span><span class="token punctuation">(</span>empty<span class="token punctuation">.</span>value<span class="token punctuation">,</span> empty<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true, true</span>

<span class="token keyword">const</span> emptyName <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token string">'42'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">checkName</span><span class="token punctuation">(</span>emptyName<span class="token punctuation">.</span>name<span class="token punctuation">,</span> emptyName<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">checkValue</span><span class="token punctuation">(</span>emptyName<span class="token punctuation">.</span>value<span class="token punctuation">,</span> emptyName<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false, true</span>

<span class="token keyword">const</span> emptyValue <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'the answer'</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token string">''</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">checkName</span><span class="token punctuation">(</span>emptyValue<span class="token punctuation">.</span>name<span class="token punctuation">,</span> emptyValue<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">checkValue</span><span class="token punctuation">(</span>emptyValue<span class="token punctuation">.</span>value<span class="token punctuation">,</span> emptyValue<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true, false</span>

<span class="token keyword">const</span> filled <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'the answer'</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token string">'42'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">checkName</span><span class="token punctuation">(</span>filled<span class="token punctuation">.</span>name<span class="token punctuation">,</span> filled<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">checkValue</span><span class="token punctuation">(</span>filled<span class="token punctuation">.</span>value<span class="token punctuation">,</span> filled<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true, true</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/v9s/v1/guide/" class="prev router-link-active">
        Introduction
      </a></span> <span class="next"><a href="/v9s/v1/guide/built-in-rules.html">
        Built-in rules
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/v9s/v1/assets/js/app.6be5d2a5.js" defer></script><script src="/v9s/v1/assets/js/3.058decf2.js" defer></script><script src="/v9s/v1/assets/js/10.48a2754e.js" defer></script>
  </body>
</html>
